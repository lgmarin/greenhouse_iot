<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="Defuma IoT - Defumadeira Controle Remoto">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <title>Defuma IoT - Defumadeira Controle Remoto</title>

    <meta name="mobile-web-app-capable" content="yes">
    <!-- <link rel="stylesheet" href="vendor/google-fonts.css">
	  <link rel="stylesheet" href="vendor/material.css"> -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:regular,bold,italic,thin,light,bolditalic,black,medium&amp;lang=en">
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.cyan-light_blue.min.css">
    <style>
    #view-source {
      position: fixed;
      display: block;
      right: 0;
      bottom: 0;
      margin-right: 40px;
      margin-bottom: 40px;
      z-index: 900;
    }
    html, body {
      font-family: 'Roboto', 'Helvetica', sans-serif;
    }
    .demo-content {
      max-width: 1080px;
    }
    </style>
  </head>
  <body>
    <div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
      <header class="mdl-layout__header mdl-color--grey-300 mdl-color-text--black">
        <div class="mdl-layout__header-row">
          <span class="mdl-layout-title">Defuma_IoT</span>
          <div class="mdl-layout-spacer"></div>
          <button onclick="goHome()" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" id="home_btn">
            <i><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#000000"><path d="M0 0h24v24H0z" fill="none"/><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg></i>
          </button>
        </div>
      </header>
      <main class="mdl-layout__content mdl-color--grey-100">
        <div class="mdl-grid demo-content">
            <div class="mdl-card mdl-shadow--2dp mdl-cell mdl-cell--8-col mdl-cell--4-col-tablet mdl-cell--12-col-desktop">
              <div class="mdl-card__title mdl-color--red-500">
                  <h2 class="mdl-card__title-text mdl-color-text--white">Dispositivo</h2>
              </div>
              <div class="mdl-card__supporting-text">
                <ul class="demo-list-item mdl-list">
                  <li class="mdl-list__item">
                    <span class="mdl-list__item-primary-content"><strong>Wifi</strong></span>
                  </li>
                  <li class="mdl-list__item">
                    <span class="mdl-list__item-primary-content">Status:</span><span id="wifi_mode">%MODE%</span>
                  </li>
                  <li class="mdl-list__item">
                    <span class="mdl-list__item-primary-content">Hostname:</span><span id="wifi_hname">%HOSTNAME%.local</span>
                  </li>                  
                  <li class="mdl-list__item">
                    <span class="mdl-list__item-primary-content">SSID:</span><span id="wifi_ssid">%SSID%</span>
                  </li>
                  <li class="mdl-list__item">
                    <span class="mdl-list__item-primary-content">IP:</span><span id="wifi_ip">%DEVICE_IP%</span>
                  </li>
                  <li class="mdl-list__item">
                    <span class="mdl-list__item-primary-content">MAC:</span><span id="wifi_ip">%MAC%</span>
                  </li>                        
                  <li class="mdl-list__item">
                    <span class="mdl-list__item-primary-content"><strong>Configurações</strong></span>
                  </li>
                  <li class="mdl-list__item">
                      <span class="mdl-list__item-primary-content">Limpar configuração Wifi:</span>
                      <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" id="del-wifi_btn">
                        <i><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#000000"><path d="M0 0h24v24H0z" fill="none"/><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/></svg></i>
                      </button>
                  </li>                               
                  <li class="mdl-list__item">
                      <span class="mdl-list__item-primary-content">Limpar configuração app:</span>
                      <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" id="del-cfg_btn">
                        <i><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#000000"><path d="M0 0h24v24H0z" fill="none"/><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/></svg></i>
                      </button>
                  </li>
                </ul>
              </div>
            </div>
        </div>
        <dialog id="delete-wifi" class="mdl-dialog">
          <h4 class="mdl-dialog__title">Excluir dados Wifi?</h4>
          <div class="mdl-dialog__content">
            <p>
              Esta ação apagará a rede Wifi salva e seu dispositivo será reiniciado. Na próxima inicialização, uma nova rede poderá ser configurada.
            </p>
          </div>
          <div class="mdl-dialog__actions">
            <button type="button" id="wifi-confirm" class="mdl-button">Apagar</button>
            <button type="button" class="mdl-button close">Cancelar</button>
          </div>
        </dialog>
        <dialog id="delete-cfg" class="mdl-dialog">
          <h4 class="mdl-dialog__title">Excluir configurações?</h4>
          <div class="mdl-dialog__content">
            <p>
              Esta ação apagará as configuraçoes salvas em seu dispositivo.
            </p>
          </div>
          <div class="mdl-dialog__actions">
            <button type="button" id="cfg-confirm" class="mdl-button">Apagar</button>
            <button type="button" class="mdl-button close">Cancelar</button>
          </div>
        </dialog>        
      </main>
    </div>
    <script>
      var wifi_dialog = document.querySelector('#delete-wifi');
          var del_wbtn = document.querySelector('#del-wifi_btn');
          if (!wifi_dialog.showModal) {
            dialogPolyfill.registerDialog(wifi_dialog);
          }
          del_wbtn.addEventListener('click', function() {
              wifi_dialog.showModal();
          });
          wifi_dialog.querySelector('.close').addEventListener('click', function() {
              wifi_dialog.close();
          });
          wifi_dialog.querySelector('#wifi-confirm').addEventListener('click', function() {
              var xhr = new XMLHttpRequest();
              location.replace("http://%DEVICE_IP%/delete-wifi");
              wifi_dialog.close();
          });
      var cfg_dialog = document.querySelector('#delete-cfg');
          var del_wbtn = document.querySelector('#del-cfg_btn');
          if (!cfg_dialog.showModal) {
            dialogPolyfill.registerDialog(cfg_dialog);
          }
          del_wbtn.addEventListener('click', function() {
              cfg_dialog.showModal();
          });
          cfg_dialog.querySelector('.close').addEventListener('click', function() {
              cfg_dialog.close();
          });
          cfg_dialog.querySelector('#cfg-confirm').addEventListener('click', function() {
            location.replace("http://%DEVICE_IP%/delete_config");
              cfg_dialog.close();
          });    
      function goHome() {
        location.replace("http://%DEVICE_IP%/");
      }
    </script>
    <!-- <script src="vendor/material.js"></script> -->
    <script src="https://code.getmdl.io/1.3.0/material.min.js"></script>
  </body>
</html>